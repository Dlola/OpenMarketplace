open_marketplace_vendor_conversation_index:
    path: /{_locale}/account/vendor/conversations
    methods: [GET]
    requirements:
        _locale: ^[A-Za-z]{2,4}(_([A-Za-z]{4}|[0-9]{3}))?(_([A-Za-z]{2}|[0-9]{3}))?$
    defaults:
        _controller:  bitbag.open_marketplace.component.core.vendor.controller.messaging.list_threads
        _sylius:
            template: "Context/Vendor/Conversation/index.html.twig"

open_marketplace_vendor_conversation_show:
    path: /{_locale}/account/vendor/conversations/{id}
    methods: [GET,POST]
    requirements:
        _locale: ^[A-Za-z]{2,4}(_([A-Za-z]{4}|[0-9]{3}))?(_([A-Za-z]{2}|[0-9]{3}))?$
    defaults:
        _controller: bitbag.open_marketplace.component.core.common.controller.messaging.show_thread
        _sylius:
            template: "Context/Vendor/Conversation/show.html.twig"

open_marketplace_vendor_conversation_message_add:
    path: /{_locale}/account/vendor/conversations/{id}/message/add
    methods: [GET, POST]
    requirements:
        _locale: ^[A-Za-z]{2,4}(_([A-Za-z]{4}|[0-9]{3}))?(_([A-Za-z]{2}|[0-9]{3}))?$
    defaults:
        _controller: bitbag.open_marketplace.component.core.common.controller.messaging.create_message
        _sylius:
            redirect: open_marketplace_vendor_conversation_show
            mail_redirect: open_marketplace_vendor_conversation_show

open_marketplace_vendor_conversation_create:
    path: /{_locale}/account/vendor/conversation/create
    methods: [GET,POST]
    requirements:
        _locale: ^[A-Za-z]{2,4}(_([A-Za-z]{4}|[0-9]{3}))?(_([A-Za-z]{2}|[0-9]{3}))?$
    defaults:
        _controller: bitbag.open_marketplace.component.core.common.controller.messaging.create_thread
        _sylius:
            template: "Context/Vendor/Conversation/create.html.twig"
            redirect: open_marketplace_vendor_conversation_show
            mail_redirect: open_marketplace_admin_conversation_show

open_marketplace_vendor_conversation_archive:
    path: /{_locale}/account/vendor/conversations/{id}/archive
    methods: [PATCH]
    requirements:
        _locale: ^[A-Za-z]{2,4}(_([A-Za-z]{4}|[0-9]{3}))?(_([A-Za-z]{2}|[0-9]{3}))?$
    defaults:
        _controller: open_marketplace.controller.conversation:applyStateMachineTransitionAction
        _sylius:
            state_machine:
                graph: open_marketplace_conversation
                transition: close
            redirect: referer
            flash: open_marketplace.ui.conversation_successfully_closed
